---
layout: archive
permalink: /report_fr/
title: "Rapport"
sidebar:
 nav: "report_fr"
---
<h2>Fonctionnement</h2>

<p>
	Ensemble de commandes de script permettant de construire des rapports. Les rapports présentent
	habituellement des données puisées dans un ou plusieurs portfolios.
</p>
<p>
	Il y a trois façons d'exécuter un script de rapport&nbsp;:
	<ul>
		<li>avec la ressource Tableau de bord dans un portfolio (le plus souvent),</li>
		<li>
			à partir de la page Exécuter un script de rapport en spécifiant le code du portfolio contenant 
			le script de rapport,
		</li>
		<li>
			à partir de la page Exécuter un script de rapport en téléversant un fichier CSV (pour le format 
			du fichier CSV voir la page Batch de cette documentation). Dans le fichier CSV, les 2 premières 
			lignes (variables globales) ne sont pas prises en compte.
		</li>
	</ul>
</p>


<h2 id='commandes'>Commandes</h2>

<h4>Éléments de construction de tableau</h4>
<ul>
	<li><code><a href='#table'>Table</a></code></li>
	<li><code><a href='#row'>Rangée</a></code></li>
	<li><code><a href='#cell'>Cellule</a></code></li>
</ul>

<h4>Éléments d'affichage</h4>
<ul>
	<li><code><a href='#text'>Texte</a></code></li>
	<li><code><a href='#node'>Nœud</a></code></li>
	<li><code><a href='#url2unit'>URL2Unit</a></code></li>
	<li><code><a href='#show-sharing'>Afficher les partages</a></code></li>
	<li><code><a href='#qrcode'>Code QR</a></code></li>
	<li><code><a href='#europass'>Europass</a></code></li>
	<li><code><a href='#username'>Login utilisateur</a></code></li>
	<li><code><a href='#firstname'>Prénom utilisateur</a></code></li>
	<li><code><a href='#lastname'>Nom famille utilisateur</a></code></li>
	<li><code><a href='#firstname-lastname'>Prénom et nom famille</a></code></li>
</ul>

<h4>Boucles</h4>
<ul>
	<li><code><a href='#for-each-node'>Pour chaque nœud</a></code></li>
<!--	<li><code><a href='#for-each-person'>Pour chaque personne</a></code></li>	-->
	<li><code><a href='#for-each-portfolio'>Pour chaque portfolio</a></code></li>
	<li><code><a href='#for-each-portfolio-node'>Pour chaque nœud de portfolio</a></code></li>
	<li><code><a href='#for-each-line'>Pour chaque ligne</a></code></li>
	<li><code><a href='#loop'>Boucle</a></code></li>
</ul>

<h4>Instructions</h4>
<ul>
	<li><code><a href='#go-parent'>Monter au parent</a></code></li>
	<li><code><a href='#if-then-else'>Si Alors Sinon</a></code></li>
</ul>

<h4>Variables et opérations</h4>
<ul>
	<li><code><a href='#report-variable'>Variable</a></code></li>
	<li><code><a href='#aggregate'>Agrégat</a></code></li>
	<li><code><a href='#operation'>Opération</a></code></li>
</ul>

<h4>Composantes SVG</h4>
<ul>
	<li><code><a href='#svg'>SVG</a></code></li>
	<li><code><a href='#draw-web-tile'>Titre SVG</a></code></li>
	<li><code><a href='#draw-web-axis'>Axe SVG</a></code></li>
	<li><code><a href='#draw-web-line'>Courbe SVG</a></code></li>
</ul>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='table'>Table</h3>
	<p> Dessine un élément HTML table.</p>
	<p>Champ à renseigner&nbsp;:</p>
	<ul>
		<li>
			<code>Références à initialiser</code> Optionnel&nbsp;: liste des variables (séparées par une barre 
			oblique) à réinitialiser. La variable peut avoir été déclarée précédement dans une autre commande 
			ou peut être déclarée pour la première fois.
		</li>
	</ul>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='row'>Rangée</h3>
	<p> Dessine un élément HTML row.</p>	
	<p>Champ à renseigner&nbsp;:</p>
	<ul>
		<li>
			<code>Références à initialiser</code> Optionnel&nbsp;: liste des variables (séparées par une barre 
			oblique) à réinitialiser. La variable peut avoir été déclarée précédement dans une autre commande 
			ou peut être déclarée pour la première fois.
		</li>
	</ul>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='cell'>Cellule</h3>
	<p> 
		Dessine un élément HTML cell. Contient habituellement un élément d'affichage (ou un 
		élément Table, pour former des tableaux complexes).
	</p>
	<p>Champ à renseigner&nbsp;:</p>
	<ul>
		<li>
			<code>colspan</code> Optionnel&nbsp;: permet de spécifier l'attribut HTML colspan d'une cellule de tableau, 
			soit le nombre de colonnes sur lesquelles s'étend la cellule.
		</li>
	</ul>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='text'>Texte</h3>
	<p>
		Permet d'afficher du texte "programmé en dur" ie&nbsp;: texte fixe qui ne dépend pas des valeurs 
		dans le portfolio (par exemple les titres de colonnes).	Habituellement utilisé dans un élément
		Cellule.
	</p>
	<p>Champs à renseigner&nbsp;:</p>
	<ul>
		<li><code>Référence</code> Optionnel&nbsp;: si utilisé, 
			la variable enregistre la valeur obtenue par l'attribut <code>Texte</code>.			
		</li>
		<li><code>Texte</code> Le texte à afficher.</li>
	</ul>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='node'>Nœud</h3>
	<p>
		Permet de puiser la valeur à afficher d'un élément de portfolio (par exemple la valeur entrée par l'utilisateur 
		dans un élément Ressource). Habituellement utilisé dans un élément Cellule.
	</p>
	<p>Champs à renseigner&nbsp;:</p>
	<ul>
		<li><code>Référence</code> Optionnel&nbsp;: si utilisé, la variable enregistre la valeur affichée.			
		</li>
		<li>
			<code>Type nœud</code> Type de l'élément à sélectionner. Les options sont&nbsp;: root, section, page,
			sous-section ou nœud ressource. 
		</li>
		<li><code>Tag sémantique</code> Tag sémantique de l'élément à sélectionner.</li>
		<li>
			<code>Afficher</code> Valeur du nœud sélectionné à afficher. Les 
			options sont&nbsp;: libellé du nœud, valeur de la ressource, code du nœud, code d'un élément Item, 
			commentaires sur le nœud, valeur d'un élément Item ou UUID du nœud.
		</li>
	</ul>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='url2unit'>URL2Unit</h3>
	<p>
		Permet d'insérer dans le tableau un lien vers une page du portfolio. Le portfolio ne doit contenir qu'une 
		seule page avec le tag sémantique spécifié. Habituellement utilisé à l'intérieur d'un élément Cellule.
	</p>
	<p>Champ à renseigner&nbsp;:</p>
	<ul>
		<li><code>Tag sémantique</code> Tag sémantique de la page vers laquelle pointe le lien.</li>
	</ul>	
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='show-sharing'>Afficher les partages</h3>
	<p>
		Permet d'afficher les usagers qui sont partagés avec un portfolio (avec les rôles des partages).
		Habituellement utilisé à l'intérieur d'un élément Cellule.
	</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='qrcode'>Code QR</h3>
	<p>
		Permet d'afficher le code QR qui mène au BubbleMap contenu dans un portfolio.
		L'élément BubbleMap est trouvé automatiquement par Karuta (le portfolio ne doit pas contenir plus d'un élément BubbleMap). 
		Habituellement utilisé à l'intérieur d'un élément Cellule.
	</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='europass'>Europass</h3>
	<p>
		Permet d'afficher l'Europass contenu dans un portfolio. 
		L'élément Europass est trouvé automatiquement par Karuta (le portfolio ne doit pas contenir plus d'un élément Europass).
		Comme l'Europass comprends sa propre mise en tableau, il n'est pas nécessaire de placer cet élément à l'intérieur d'un 
		élément Cellule.
	</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='username'>Login utilisateur</h3>
	<p>
		Permet d'afficher le login (identifiant) de l'utilisateur qui exécute le report (par exemple, l'étudiant qui regarde 
		son propre portfolio). 
	</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='firstname'>Prénom utilisateur</h3>
	<p>
		Permet d'afficher le prénom de l'utilisateur qui exécute le report (par exemple, l'étudiant qui regarde son
		propre portfolio).  
	</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='lastname'>Nom famille utilisateur</h3>
	<p>
		Permet d'afficher le nom de famille de l'utilisateur qui exécute le report (par exemple, l'étudiant qui regarde son
		propre portfolio).  
	</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='firstname-lastname'>Prénom et nom famille</h3>
	<p>
		Permet d'afficher le prénom et le nom de famille de l'utilisateur qui exécute le report (par exemple, l'étudiant 
		qui regarde son propre portfolio).  
	</p>
</article>
	
<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='for-each-node'>Pour chaque nœud</h3>
	<p>
		Les commandes qui se trouvent à l'intérieur de cet élément sont exécutées pour chacun des 
		éléments du portfolio qui répondent aux critères <code>Type de nœud</code>, 
		<code>Tag sémantique</code> et <code>Test</code>.
	</p>
	<p>Champs à renseigner&nbsp;:</p>
	<ul>
		<li>
			<code>Références à initialiser</code> Optionnel&nbsp;: liste des variables (séparées par une barre 
			oblique) à réinitialiser pour chaque nouvel élément. La variable peut avoir été déclarée 
			précédement dans une autre commande ou peut être déclarée pour la première fois.
		</li>
		<li>
			<code>Variable compteur</code> Optionnel&nbsp;: permet de déclarer une variable compteur qui est incrémentée 
			à chaque tour de la boucle et peut être utilisée à l'intérieur de celle-ci.
		</li>
		<li>
			<code>Type nœud</code> Type des éléments à sélectionner (liste déroulante des choix 
			possibles).
		</li>
		<li>
			<code>Tag sémantique</code> Tag sémantique des éléments à sélectionner.
		</li>
		<li>
			<code>Test</code> Optionnel&nbsp;: test jQuery permettant de filtrer parmis les éléments répondant 
			aux deux critères précédents. Si pas utilisé, tous les nœuds qui répondent aux deux critères 
			précédents sont traités.
		</li>
	</ul>
	<p>Tests prédéfinis&nbsp;:</p>
	<ul>
		<li>
			<code>.sort()</code> Trie la liste des nœuds résultats sur le libellé, en ordre croissant.
		</li>
		<li>
			<code>.invsort()</code> Trie la liste des nœuds résultats sur le libellé, en ordre décroissant.
		</li>
		<li>
			<code>.sortResource()</code> Trie la liste des nœuds résultats sur la ressource, en ordre croissant.
		</li>
		<li>
			<code>.invsortResource()</code> Trie la liste des nœuds résultats sur la ressource, en ordre décroissant.
		</li>
		<li>
			<code>.sortUTC()</code> Trie une liste d'éléments Calendrier sur la date, en format international (peu
			importe le format d'affichage choisi dans l'élément Calendrier).
		</li>
		<li>
			<code>.invsortUTC()</code> Trie une liste d'éléments Calendrier sur la date, en format international (peu
			importe le format d'affichage choisi dans l'élément Calendrier).
		</li>
		<li>
			<code>.filename_not_empty()</code> S'applique aux éléments Document et vérifie si un fichier 
			a été téléversé dans l'élément (vérifie que l'élément n'est pas vide).
		</li>
		<li>
			<code>.filename_empty()</code> S'applique aux éléments Document et vérifie si un fichier 
			a été téléversé dans l'élément (vérifie que l'élément est vide).
		</li>
		<li>
			<code>.url_not_empty()</code> S'applique aux éléments URL et vérifie si un hyperlien a été 
			enregistré (vérifie que l'élément n'est pas vide).
		</li>
		<li>
			<code>.url_empty()</code> S'applique aux éléments URL et vérifie si un hyperlien a été 
			enregistré (vérifie que l'élément est vide).
		</li>
		<li>
			<code>.code_not_empty()</code> S'applique aux éléments Ressource et indique que le 
			code existe (vérifie que le code n'est pas vide).
		</li>
		<li>
			<code>.code_empty()</code> S'applique aux éléments Ressource et indique que le
			code n'existe pas (vérifie que le code est vide).
		</li>
		<li>
			<code>.text_not_empty()</code> S'applique aux éléments Texte court et Texte long et vérifie 
			si du texte a été enregistré dans la Ressource (vérifie que l'élément n'est pas vide).
		</li>
		<li>
			<code>.text_empty()</code> S'applique aux éléments Texte court et Texte long et vérifie 
			si du texte a été enregistré dans la Ressource (vérifie que l'élément est vide).
		</li>
		<li>
			<code>.submitted()</code> Vérifie l'élément a été soumis.
		</li>
		
	</ul>
	<p>
		Les tests prédéfinis peuvent être combinés. Par exemple&nbsp;: 
		<code>.sort().first()</code> retournera le premier élément de la liste triée.
	</p>
	<p>Exemples de fonctions jQuery&nbsp;:</p>
	<ul>
		<li><code>.first()</code> Retourne le premier élément de la liste résultat.</li>
		<li><code>.not(':eq(0)')</code> Retourne la liste sauf le premier élément.</li>
		<li><code>.last()</code> Retourne le dernier élément de la liste résultat.</li>
		<li><code>.has("code:contains('2')")</code> Sélectionne les éléments dont le code contient un "2".</li>
		<li>
			<code>.siblings().has("metadata[semantictag*=job-title]")</code> Retourne la liste des éléments 
			de même niveau (dans l'arborescence XML) contenant le tag sémantique "job-title".
		</li>
		<li>
			<code>.has("metadata-wad[submitted='Y']").last()</code> Retourne le dernier élément ayant été 
			soumis.
		</li>
		<li>
			<code>.has("metadata-wad[private='N']").last()</code> Retourne le dernier élément qui est visible.
		</li>
		<li>
			<code>.has('asmContext:has("metadata[semantictag*=visibility-cv-short]"):has
			("code:contains(@1)")')</code> 
			Retourne un élément si celui-ci a un enfant avec le tag sémantique "visibility-cv-short" et 
			dont le code contient "@1".
		</li>
		<li>
			<code>.sortElements(function(a, b){ return $("code",$("asmResource[xsi_type=Get_Resource]",a))
			.text() &gt; $("code",$("asmResource[xsi_type=Get_Resource]",b)).text() ? 1 : -1; })</code> 
			Trie sur le code du Get_Resource.
		</li>
	</ul>
</article>

<!--
<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='for-each-person'>Pour chaque personne</h3>
	<p>
		Les commandes qui se trouvent à l'intérieur de cet élément sont exécutées pour chacune des 
		personnes répondant au test <code>Sélection personnes</code>.
	</p>
	<p>Champs à renseigner&nbsp;:</p>
	<ul>
		<li>
			<code>Références à initialiser</code> Optionnel&nbsp;: liste des variables (séparées par une barre 
			oblique) à réinitialiser pour chaque nouvelle personne. La variable peut avoir été déclarée 
			précédement dans une autre commande ou peut être déclarée pour la première fois.
		</li>
		<li>
			<code>Variable compteur</code> Optionnel&nbsp;: permet de déclarer une variable compteur qui est incrémentée 
			à chaque tour de la boucle et peut être utilisée à l'intérieur de celle-ci.
		</li>
		<li>
			<code>Sélection personnes</code> Test jQuery permetant de sélectionner les personnes du système. 
			Exemples&nbsp;:
			<ul>
				<li><code>username='olivier'</code> Sélection de la personne dont l'identifiant Karuta est 
					"olivier".
				</li>
				<li><code>username=identifier</code> Sélection de la personne dont l'identifiant Karuta est 
					le contenu de la variable <i>identifier</i>.
				</li>
			</ul>
		</li>
	</ul>
</article>
-->

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='for-each-portfolio'>Pour chaque portfolio</h3>
	<p>
		Les commandes qui se trouvent à l'intérieur de cet élément sont exécutées pour chacun des 
		portfolios répondant au test <code>Sélection portfolios</code>.
	</p>
	<p>Champs à renseigner&nbsp;:</p>
	<ul>
		<li>
			<code>Références à initialiser</code> Optionnel&nbsp;: liste des variables (séparées par une barre 
			oblique) à réinitialiser pour chaque nouveau portfolio. La variable peut avoir été déclarée 
			précédement dans une autre commande ou peut être déclarée pour la première fois ici.
		</li>
		<li>
			<code>Variable compteur</code> Optionnel&nbsp;: permet de déclarer une variable compteur qui est incrémentée 
			à chaque tour de la boucle et peut être utilisée à l'intérieur de celle-ci.
		</li>
		<li>
			<code>Sélection portfolios</code> Test jQuery permettant de sélectionner des portfolios parmi 
			ceux visibles par l'usager. Exemples&nbsp;:
			<ul>
				<li>
					<code>code*='2015_work'</code> Sélection des portfolios dont le code contient 
					"2015_work".
				</li>
				<li>
					<code>code*=portfolio_code</code> Sélection des portfolios dont le code contient le 
					contenu de la variable <i>porfolio_code</i>.
				</li>
			</ul>
		</li>
		<li>
			<code>Tri&nbsp;- Tag sémantique</code> Optionnel&nbsp;: tag sémantique du nœud sur lequel doit 
			se faire le tri des portfolios. Si pas utilisé, les portfolios sortent dans l'ordre naturel
			des codes de portfolio.
		</li>
		<li>
			<code>Tri&nbsp;- Élément</code> Valeur du nœud sélectionné à partir de laquelle 
			faire le tri. Les options sont&nbsp;: libellé du nœud, valeur de la ressource, code du nœud 
			ou valeur d'un élément Item (liste déroulante des choix possibles).
		</li>
	</ul>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='for-each-portfolio-node'>Pour chaque nœud de portfolio</h3>
	<p>
		Les commandes qui se trouvent à l'intérieur de cet élément sont exécutées pour chacun des 
		portfolios répondant au test <code>Sélection portfolios</code>. Contrairement à la commande
		précédente, ce n'est pas tout le portfolio qui est chargé mais uniquement le nœud spécifié 
		dans <code>Tag sémantique</code>. Ceci permet une exécution plus rapide dans le cas de gros
		portfolios.
	</p>
	<p>Champs à renseigner&nbsp;:</p>
	<ul>
		<li>
			<code>Références à initialiser</code> Optionnel&nbsp;: liste des variables (séparées par une barre 
			oblique) à réinitialiser pour chaque nouveau portfolio. La variable peut avoir été déclarée 
			précédement dans une autre commande ou peut être déclarée pour la première fois.
		</li>
		<li>
			<code>Variable compteur</code> Optionnel&nbsp;: permet de déclarer une variable compteur qui est incrémentée 
			à chaque tour de la boucle et peut être utilisée à l'intérieur de celle-ci.
		</li>
		<li>
			<code>Sélection portfolios</code> Test jQuery permetant de sélectionner des portfolios parmi 
			ceux visibles par l'usager. Exemples&nbsp;:
			<ul>
				<li>
					<code>code*='2015_work'</code> Sélection des portfolios dont le code contient 
					"2015_work".
				</li>
				<li>
					<code>code*=portfolio_code</code> Sélection des portfolios dont le code contient 
					le contenu de la variable <i>porfolio_code</i>.
				</li>
			</ul>
		</li>
		<li>
			<code>Tri&nbsp;- Tag sémantique</code> Optionnel&nbsp;: tag sémantique du nœud sur lequel doit 
			se faire le tri des portfolios. Si pas utilisé, les portfolios sortent dans l'ordre naturel
			des codes de portfolio.
		</li>
		<li>
			<code>Tri&nbsp;- Élément</code> Valeur du nœud sélectionné à partir de laquelle faire le tri.
			Les options sont&nbsp;: libellé du nœud, valeur de la ressource, code du nœud ou valeur d'un 
			élément Item (liste déroulante des choix possibles).
		</li>
		<li>
			<code>Tag sémantique</code> Tag sémantique du ou des nœuds du portfolio à charger pour 
			l'exécution.
		</li>
	</ul>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='for-each-line'>Pour chaque ligne</h3>
	<p>
		Les commandes qui se trouvent à l'intérieur de cet élément sont exécutées pour chacune des 
		lignes du fichier CSV. Cet élément doit contenir au moins un des trois éléments suivants&nbsp;:
		<code>Pour chaque personne</code>, <code>Pour chaque portfolio</code> ou <code>Pour chaque nœud de portfolio</code>.
	</p>
	<p>
		Pour un élément <code>ForEachPerson</code>&nbsp;: dans l'attribut <code>Sélection personnes</code>, 
		si la valeur est "username=identifiant" (sans guillemets), Karuta remplacera "identifiant" 
		par la valeur de la variable locale <i>identifiant</i> du fichier CSV.
	</p>
	<p>
		Pour un élément <code>ForEachPortfolio</code> ou <code>ForEachPortfolioNode</code>&nbsp;:
		dans l'attribut <code>Sélection portfolios</code>, si la valeur est "code=portfolio_code" 
		(sans guillemets), Karuta remplacera "portfolio_code" par la valeur de la variable locale 
		<i>portfolio_code</i> du fichier CSV.
	</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='loop'>Boucle</h3>
	<p>
		Permet d'implémenter une boucle de type "for i = x..y". Les commandes à l'intérieur de la boucle seront 
		exécutées pour le nombre d'itérations contenues entre <code>Premier</code> et <code>Dernier</code>.
	</p>
	<p>Champs à renseigner&nbsp;:</p>
	<ul>
		<li>
			<code>Références à initialiser</code> Optionnel&nbsp;: liste des variables (séparées par une barre 
			oblique) à réinitialiser pour chaque nouveau portfolio. La variable peut avoir été déclarée 
			précédement dans une autre commande ou peut être déclarée pour la première fois.
		</li>
		<li>
			<code>Variable compteur</code> Optionnel&nbsp;: permet de déclarer une variable compteur qui est incrémentée 
			à chaque tour de la boucle et peut être utilisée à l'intérieur de celle-ci.
		</li>
		<li>
			<code>Premier</code> Première itération de la boucle (habituellement 1).
		</li>
		<li>
			<code>Dernier</code> Dernière itération de la boucle (peut être une valeur, une variable, la longueur d'un 
			tableau de références, etc).
		</li>
	</ul>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='go-parent'>Monter au parent</h3>
	<p>
		Permet de remonter au parent du nœud courrant dans l'arbre XML. Peut être utilisé imbriqués un dans l'autre 
		pour remonter jusqu'à la racine du portfolio.
	</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='if-then-else'>Si Alors Sinon</h3>
	<p>Permet d'implémenter une instruction conditionnelle de type "if-then-else".</p>
	<p>Champ à renseigner&nbsp;:</p>
	<ul>
		<li>
			<code>Test</code> test javascript ou jQuery qui détermine si ce sont les actions du alors ou les actions du sinon 
			qui seront exécutées (doit retourner vrai ou faux).
		</li>
	</ul>
</article>
	
<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='report-variable'>Variable</h3>
	<p>Permet de déclarer une variable et de lui assigner une valeur initiale.</p>
	<p>Champs à renseigner&nbsp;:</p>
	<ul>
		<li><code>Référence</code> Optionnel&nbsp;: si utilisé, 
			la référence enregistre la valeur initiale assignée à la variable.			
		</li>
		<li>
			<code>Nom de la variable</code> nom de la variable.
		</li>
	</ul>
	<p>Il y a cinq méthodes pour l'assignation de la valeur initiale&nbsp;:</p>
	<ul>
		<li>
			<code>Valeur du nœud</code> Permet de puiser la valeur de la variable d'un élément de portfolio (par exemple la valeur 
			entrée par l'utilisateur dans un élément Ressource). Voir élément d'affichage <code><a href='#node'>Nœud</a></code>.
		</li>
		<li>
			<code>Valeur par aggrégat</code> Permet d'assigner à la variable la somme ou la moyenne des valeurs contenues dans 
			une Référence. Voir élément <code><a href='#aggregate'>Agrégat</a></code>.
		</li>
		<li>
			<code>Valeur par opération</code> Permet d'assigner à la variable le résultat d'une opération. 
			Voir élément <code><a href='#operation'>Opération</a></code>.
		</li>
		<li>
			<code>Champ valeur</code> Permet d'assigner une valeur "programmée en dur" ie&nbsp;: texte fixe qui ne dépend pas des 
			valeurs dans le portfolio. Équivalent de l'élément d'affichage Texte.
		</li>
		<li><code>Autre variable</code> Permet d'assigner la valeur d'une autre variable.</li>
	</ul>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='aggregate'>Agrégat</h3>
	<p>
		Permet d'afficher la somme ou la moyenne des valeurs contenues dans une variable Référence. La 
		Référence a précédemment été déclarée dans l'attribut <code>Références à initialiser</code> 
		d'un élément Table, Rangée ou d'une boucle, et a collecté les valeurs des éléments où elle est référencée 
		(attribut <code>Référence</code>). Elle est habituellement référencée dans un élément Nœud (ou Texte).
	</p>
	<p>
		Référence dans un élément <code>Nœud</code>&nbsp;: Fonctionne uniquement avec 
		la Valeur d'un élément Item (<code>Item - Valeur</code>).
	</p>
	<p>
		Référence dans un élément <code>Text</code>&nbsp;: doit contenir uniquement 
		une valeur numérique.
	</p>
	<p>Champs à renseigner&nbsp;:</p>
	<ul>
		<li>
			<code>Référence</code> Optionnel&nbsp;: si utilisé, la variable enregistre la valeur résultante de l'agrégation.			
		</li>
		<li><code>Type agrégation</code> Somme ou moyenne (liste déroulante des choix possibles).</li>
		<li><code>Sélection référence</code> Nom de la variable qui contient les valeurs à agréger.</li>
	</ul>	
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='operation'>Opération</h3>
	<p>
		Permet d'afficher le résultat d'une opération arithmétique.
	</p>
	<p>Champs à renseigner&nbsp;:</p>
	<ul>
		<li>
			<code>Référence</code> Optionnel&nbsp;: si utilisé, la variable enregistre la valeur résultante de l'opération.			
		</li>
		<li>
			<code>Type d'opération</code> Addition, division, multiplication, pourcentage ou soustraction 
			(liste déroulante des choix possibles).
		</li>
		<li><code>Opérande 1</code> Premier opérande de l'opération.</li>
		<li><code>Opérande 2</code> Deuxième opérande de l'opération.</li>
	</ul>	
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='svg'>SVG</h3>
	<p>
		Initialise un dessin vectoriel SVG. Les commandes de dessin disponibles permettent de construire des diagrammes 
		en étoile tel qu'illustré ci-dessous&nbsp;:
	</p>
	<img src='../assets/img/web.png' width='80%'/>
	<p>
		Note importante : l'élément Table qui contient l'élément SVG doit avoir l'instruction "width:100%;" dans
		le champ "Autre CSS" de l'onglet "CSS"&nbsp;:
	</p>
	<img src='../assets/img/width-100.png' width='60%'/>
	<p>Champs à renseigner&nbsp;:</p>
	<ul>
		<li><code>Largeur minimale</code> Largeur minimale (par défaut 100%).</li>
		<li><code>Hauteur minimale</code> Hauteur minimale (par défaut 500px).</li>
	</ul>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='draw-web-title'>Titre SVG</h3>
	<p>Affiche le titre du dessin SVG.</p>
	<p>Champs à renseigner&nbsp;:</p>
	<ul>
		<li>
			<code>Titre&nbsp;- Type nœud</code> Type de l'élément à sélectionner (liste déroulante des choix 
			possibles).
		</li>
		<li><code>Titre&nbsp;- Tag sémantique</code> Tag sémantique de l'élément à sélectionner.</li>
		<li>
			<code>Titre&nbsp;- Afficher</code> Valeur du nœud sélectionné à afficher (liste déroulante des choix possibles). Les 
			options sont&nbsp;: libellé du nœud, valeur de la ressource, code du nœud, commentaires sur le nœud, UUID 
			du nœud, code d'un élément Item ou valeur d'un élément Item.
		</li>
	</ul>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='draw-web-axis'>Axe SVG</h3>
	<p>Trace les axes de l'étoile, avec leurs libellés.</p>
	<p>Champs à renseigner&nbsp;:</p>
	<ul>
		<li><code>Référence</code> Optionnel&nbsp;: si utilisé, 
			la variable enregistre la valeur obtenue par l'attribut <code>Afficher</code>.			
		</li>
		<li>
			<code>Axe&nbsp;- Type nœud</code> Type de l'élément à sélectionner (liste déroulante des choix 
			possibles).
		</li>
		<li><code>Axe&nbsp;- Tag sémantique</code> Tag sémantique de l'élément à sélectionner.</li>
		<li>
			<code>Axe&nbsp;- Afficher</code> Valeur du nœud sélectionné à afficher (liste déroulante des choix possibles). Les 
			options sont&nbsp;: libellé du nœud, valeur de la ressource, code du nœud, commentaires sur le nœud, UUID 
			du nœud, code d'un élément Item ou valeur d'un élément Item.
		</li>
	</ul>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='draw-web-line'>Courbe SVG</h3>
	<p>
		Place les points sur les axes et trace une ligne entre les points (pour former l'étoile). Affiche également 
		la légende de l'élément SVG. Il est possible d'utiliser plusieurs éléments Courbe SVG dans le même élément 
		SVG. Les étoiles seront	superposées sur les mêmes axes avec des couleurs différentes.
	</p>
	<p>Champs à renseigner pour placer les points sur les axes&nbsp;:</p>
	<ul>
		<li><code>Référence</code> Optionnel&nbsp;: si utilisé, 
			la variable enregistre la valeur obtenue par l'attribut <code>Afficher</code>.			
		</li>
		<li>
			<code>Points&nbsp;- Type nœud</code> Type de l'élément à sélectionner (liste déroulante des choix 
			possibles).
		</li>
		<li><code>Points&nbsp;- Tag sémantique</code> Tag sémantique de l'élément à sélectionner.</li>
		<li>
			<code>Points&nbsp;- Afficher</code> Valeur du nœud sélectionné à afficher (liste déroulante des choix possibles). Les 
			options sont&nbsp;: libellé du nœud, valeur de la ressource, code du nœud, commentaires sur le nœud, UUID 
			du nœud, code d'un élément Item ou valeur d'un élément Item.
		</li>
	</ul>
	<p>Champs à renseigner pour la graduation des axes&nbsp;:</p>
	<ul>
		<li><code>Axe&nbsp;- Valeur minimale</code> Valeur inférieure pour la graduation des axes.</li>
		<li><code>Axe&nbsp;- Valeur maximale</code> Valeur supérieure pour la graduation des axes.</li>
	</ul>
	<p>Champs à renseigner pour construire la légende&nbsp;:</p>
	<ul>
		<li>
			<code>Légende&nbsp;- Type nœud</code> Type de l'élément à sélectionner (liste déroulante 
			des choix possibles).
		</li>
		<li><code>Légende&nbsp;- Tag sémantique</code> Tag sémantique de l'élément à sélectionner.
		<li>
			<code>Légende&nbsp;- Afficher</code> Valeur du nœud sélectionné à afficher dans la légende. 
			Les options sont&nbsp;: libellé du nœud, valeur de la ressource, code du nœud ou 
			valeur d'un élément Item (liste déroulante des choix possibles).</li>
		<li>
			<code>Légende&nbsp;- Position</code> Entier donnant la position relative de la légende 
			(par défaut 0, ce qui positionne la légende au plus bas).
		</li>
	</ul>
</article>


<h2 id='commandesCSV'>Commandes CSV</h2>

<p>
	Les commandes CSV sont utilisées avec la fonction execReport_BatchCSV. Cette fonction permet de créer en 
	mémoire un fichier CSV temporaire qui est passé en paramètre à un batch. Autrement dit, un fichier CSV est
	construit à partir d'un portfolio puis fournit à un script de batch. Une fois la fonction exécutée le fichier
	n'est pas conservé.
</p>
<p>Exemple de script de rapport :</p>
<img src='../assets/img/report-csv.png' width='80%'/>
<p>Exemple de fichier temporaire résultant :</p>
<img src='../assets/img/fichier-csv.png' width='60%'/>
<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='csv-line'>Ligne CSV</h3>
	<p>
		Ajoute une ligne au fichier CSV temporaire. Il faut ensuite remplir les colonnes de la ligne, habituellement 
		avec une combinaison d'éléments Texte (pour les valeur "en dur") et d'éléments Valeur CSV (pour tirer des
		valeurs du portfolio).</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='csv-value'>Valeur CSV</h3>
	<p>Équivalent de l'élément d'affichage Nœud pour écrire dans un fichier CSV.</p>
	<p>Champs à renseigner&nbsp;:</p>
	<ul>
		<li><code>Type nœud</code> Type de l'élément à sélectionner (liste déroulante des choix possibles).</li>
		<li><code>Tag sémantique</code> Tag sémantique de l'élément à sélectionner.</li>
		<li>
			<code>Afficher</code> Valeur du nœud sélectionné à afficher (liste déroulante des choix possibles). Les 
			options sont&nbsp;: libellé du nœud, valeur de la ressource, code du nœud, commentaires sur le nœud, UUID 
			du nœud, code d'un élément Item ou valeur d'un élément Item.
		</li>
	</ul>
</article>

